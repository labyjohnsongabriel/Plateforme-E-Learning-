import dotenv from 'dotenv';

// Load environment variables from .env file
dotenv.config();

// Interface for environment variables
interface EnvConfig {
  DB_URI: string;
  JWT_SECRET: string;
  EMAIL_HOST: string;
  EMAIL_PORT: number;
  EMAIL_USER: string;
  EMAIL_PASS: string;
  UPLOAD_PATH: string;
  PORT: number;
}

// Validate and type environment variables
const config: EnvConfig = {
  DB_URI: process.env.DB_URI ?? 'mongodb://localhost:27017/elearning',
  JWT_SECRET: process.env.JWT_SECRET ?? 'your_jwt_secret',
  EMAIL_HOST: process.env.EMAIL_HOST ?? 'smtp.gmail.com',
  EMAIL_PORT: parseInt(process.env.EMAIL_PORT ?? '587', 10),
  EMAIL_USER: process.env.EMAIL_USER ?? 'your_email@example.com',
  EMAIL_PASS: process.env.EMAIL_PASS ?? 'your_email_password',
  UPLOAD_PATH: process.env.UPLOAD_PATH ?? './Uploads',
  PORT: parseInt(process.env.PORT ?? '3001', 10),
};

// Validate required environment variables
const requiredVars = ['DB_URI', 'JWT_SECRET', 'EMAIL_USER', 'EMAIL_PASS'] as const;
for (const varName of requiredVars) {
  if (!process.env[varName]) {
    throw new Error(`Missing required environment variable: ${varName}`);
  }
}

export default config;